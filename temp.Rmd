---
title: 'Code description'
---

# About

This document describes the R code used in Wallace.

# Packages instalation

Before start, install the following packages:
```{r, eval = FALSE}
install.packages(devtools)
install.packages(rgbif)
install.packages(maptools)
install.packages(spThin)
install.packages(ENMeval)
install.packages(dismo)
install.packages(rgeos)
install.packages(repmis)
```
Now load them:
```{r, message = FALSE}
library(devtools)
library(rgbif)
library(maptools)
library(spThin)
library(ENMeval)
library(dismo)
library(rgeos)
library(repmis)
```
Load the functions necessary to run the analysis:
```{r}
source('functions.R')
```

The analysis will be done for the following species:
```{r}
gbifName <- 'tremarctos ornatus'
```

The search of occurrences will be limited to:
```{r}
occurrences <- 20
```

Apply the function to obtain the gbif records for the selected species:
```{r, warning = FALSE, message = FALSE}
results <- occ_search(scientificName = gbifName, limit = occurrences, hasCoordinate = TRUE)
```

Rename the results:
```{r, warning = FALSE, message = FALSE}
gbifOrig <- results
```

Occurrence table changes:
```{r, warning = FALSE, message = FALSE}
 cols <- c("name", "decimalLongitude", "decimalLatitude", "country", "stateProvince", "locality", "elevation", "basisOfRecord")
 locs.in <- results$data[!is.na(results$data[, 3]), ][, cols]
 locs <- remDups(locs.in)
 names(locs)[2:3] <- c("lon", "lat")
 locs$origID <- row.names(locs)

```

Create the null object:
```{r, warning = FALSE, message = FALSE}
gbifoccs <- NULL
```

Adjusting table values:
```{r, warning = FALSE, message = FALSE}
 gbifoccs <- rbind(gbifoccs, locs)
 gbifoccs <- remDups(gbifoccs)
 df <- gbifoccs

```